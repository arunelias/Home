<!-- Render the sidebar partial -->
<%= render partial: "layouts/sidebar", locals: {cur_step: PermitStepsController::STEPS.index(:answer_screener) + 1} %>

<!-- Begin step -->
<div class="col-sm-9">
  <h1>Enter your project details</h1>
  <%= form_for @permit, url: wizard_path, html: {name: "address-form"} do |f| %>
    <!-- error checking -->
    <% if @permit.errors.any? %>
      <div class="alert alert-danger">
        <p><strong>Check your answers below and try again.</strong></p>
      </div>
    <% end %>
    <!-- ./error checking -->

    <!-- address entry -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4>Where you're doing the work</h4>
      </div>
      <div class="panel-body">
        <!-- Start the address form -->
        <div class="form-group">
          <%= render  partial: "permit_steps/form_helper/text_field", 
              locals: { f: f, 
                        question: "Enter the address of the home you're working on.", 
                        helper_text: nil,
                        attribute: :owner_address, 
                        placeholder: "ex. 123 Main St. San Antonio, TX",
                        input_addon: nil } %>
          <span class="help-block">You must own this home.</span>
        </div>
      </div><!-- ./panel_body -->
    </div><!-- panel -->   
    <!-- ./address entry -->

    <% if @permit.selected_addition %>
      <!-- Room Additions section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your new space</h4>
        </div>
        <div class="panel-body">
          <p>What best describes the space you are building?</p>

            <% @permit_addition_screener.each do |attribute, details| %>

              <%= render  partial: "permit_steps/form_helper/radio", 
                          locals: { f: f, 
                                    question: details[:label], 
                                    attribute: attribute, 
                                    option:  details[:options]} %>
            <% end %>

        </div>
      </div>
      <!-- ./Room Additions section -->
    <% end %>

    <% if @permit.selected_acs_struct %>
      <!-- Shed/Garage Accessory Structure section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your new shed or garage</h4>
        </div>
        <div class="panel-body">
          <p>What best describes the shed or garage you are building?</p>

            <% @permit_acs_struct_screener.each do |attribute, details| %>

              <%= render  partial: "permit_steps/form_helper/radio", 
                          locals: { f: f, 
                                    question: details[:label], 
                                    attribute: attribute, 
                                    option:  details[:options]} %>
            <% end %>

        </div>
      </div>
      <!-- ./Shed/Garage Accessory Structure -->
    <% end %>

    <% if @permit.selected_deck %>
      <!-- Deck section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your new deck</h4>
        </div>
        <div class="panel-body">
          <p>What best describes the deck you are building?</p>

            <% @permit_deck_screener.each do |attribute, details| %>

              <%= render  partial: "permit_steps/form_helper/radio", 
                          locals: { f: f, 
                                    question: details[:label], 
                                    attribute: attribute, 
                                    option:  details[:options]} %>
            <% end %>
               
        </div>
      </div>
      <!-- ./Deck section -->
    <% end %>

    <% if @permit.selected_pool %>
      <!-- Swimming Pool section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your new swimming pool</h4>
        </div>
        <div class="panel-body">
          <p>What best describes the swimming pool you are building?</p>

            <% @permit_pool_screener.each do |attribute, details| %>
              
              <%= render  partial: "permit_steps/form_helper/radio", 
                          locals: { f: f, 
                                    question: details[:label], 
                                    attribute: attribute, 
                                    option:  details[:options]} %>
            <% end %>

        </div>
      </div>
      <!-- ./Swimming Pool section -->
    <% end %>
    
    <% if @permit.selected_window %>
      <!-- Windows section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your windows</h4>
        </div>
        <div class="panel-body">
          <p>Are you <b>only</b> replacing broken glass?</p>

          <%= render  partial: "permit_steps/form_helper/radio", 
                      locals: { f: f,
                                question: nil,
                                attribute: :window_replace_glass, 
                                option: [ { value: true, 
                                            label: "Yes" }, 
                                          { value: false, 
                                            label: "No" }]} %>         
        </div>
      </div>
      <!-- ./Windows section -->
    <% end %>

    
    <% if @permit.selected_door %>
      <!-- Doors section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your doors</h4>
        </div>
        <div class="panel-body">
          <p>Are you <b>only</b> replacing the existing door on current hinges?</p>
          <%= render  partial: "permit_steps/form_helper/radio", 
                      locals: { f: f,
                                question: nil,
                                attribute: :door_replace_existing, 
                                option: [ { value: true, 
                                            label: "Yes" }, 
                                          { value: false, 
                                            label: "No" }]} %>        
        </div>
      </div>
      <!-- ./Doors section -->
    <% end %>

    
    <% if @permit.selected_wall %>
      <!-- Walls section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your walls</h4>
        </div>
        <div class="panel-body">
          <p>How are you changing your walls?</p>
          <%= render  partial: "permit_steps/form_helper/radio", 
                      locals: { f: f,
                                question: nil,
                                attribute: :wall_general_changes, 
                                option: [ { value: true, 
                                            label: "I am only painting, adding wallpaper, or repairing sheetrock â€” I am not moving or altering studs" }, 
                                          { value: false, 
                                            label: "I am doing something else" }]} %>          
        </div>
      </div>
      <!-- ./Walls section -->
    <% end %>

    
    <% if @permit.selected_siding %>
      <!-- Siding Replacement section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your siding replacement</h4>
        </div>
        <div class="panel-body">
          <p>Are you <b>only</b> placing new siding over existing siding?</p>

          <%= render  partial: "permit_steps/form_helper/radio", 
                      locals: { f: f,
                                question: nil,
                                attribute: :siding_over_existing, 
                                option: [ { value: true, 
                                            label: "Yes" }, 
                                          { value: false, 
                                            label: "No" }]} %>  
        </div>
      </div>
      <!-- ./Siding Replacement section -->
    <% end %>

    
    <% if @permit.selected_floor %>
      <!-- Floor - Structural Repairs section -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4>About your floors</h4>
        </div>
        <div class="panel-body">
          <p>How are you changing your floors?</p>

          <%= render  partial: "permit_steps/form_helper/radio",
                      locals: { f: f,
                                question: nil,
                                attribute: :floor_covering, 
                                option: [ { value: true, 
                                            label: "I am only replacing or adding carpet, tile, wood, or laminate flooring" }, 
                                          { value: false, 
                                            label: "I am doing something else" }]} %>       
        </div>
      </div>
      <!-- ./Floor-Structural Repairs section -->
    <% end %>
   
    <!-- Contractor section -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4>Who is helping</h4>
      </div>
      <div class="panel-body">
        <p>Who will be doing the work?</p>

        <%= render  partial: "permit_steps/form_helper/radio", 
                    locals: { f: f,
                              question: nil,
                              attribute: :contractor, 
                              option: [ { value: false, 
                                          label: "I'm doing the work myself (with help from my friends or family)" },
                                        { value: true, 
                                          label: "I'm hiring a contractor" }]} %>            

      </div>
    </div><!-- ./Contractor section -->

    <!-- submit button -->
    <%= f.submit "Submit", class: "btn btn-primary btn-lg"%>

  <% end %>
</div> <!-- ./col-sm-9 -->
<div class="col-sm-4 col-md-3" id="sidebar"> <!-- use the boostrap grid -->

  <!-- colorful house block -->
  <div class="visuals hidden-xs">
    <%= image_tag "house.png",                      class: "house"    %>
    <%= image_tag "color-house-parts/addition.png", class: "addition" %>
  </div>

  <!-- progress through form -->
  <div class="status">
    <h4 class="hidden-xs">Your progress</h4>
    <% steps = ["1. Choose your project", "2. Enter your address", "3. Select your permits", "4. Fill out permits", "5. Submit your permits"] %>
    <ul>
      <li class="cur-step hidden-sm hidden-md hidden-lg"><strong>Current Step:</strong></li><!-- for mobile devices -->
      <% for i in 0..steps.length - 1 %>
        <% if i == cur_step && i != (steps.length - 1) %>
          <%= content_tag :li, steps[i], class: "cur-step" %>
        <% elsif i == cur_step && i == (steps.length - 1) %>
          <%= content_tag :li, steps[i], class: "cur-step" %><%= image_tag "checkmark.png", class: "last hidden-xs" %>
        <% elsif i < cur_step %>
          <%= content_tag :li, steps[i] %><%= image_tag "checkmark.png", class: "hidden-xs" %>
        <% else %> 
          <%= content_tag :li, steps[i] %>
        <% end %>
      <% end %>
    </ul>
  </div>

</div>

<!-- @TODO refactor this out to javascript asset pipelien -->
<script>
  var addition = <%= @permit.addition != nil ? @permit.addition : false %>;
  if (addition)
  {
    $(".addition").fadeToggle("fast","swing");
    $('.addition-btn').toggleClass("toggle-on");
  }
</script>
